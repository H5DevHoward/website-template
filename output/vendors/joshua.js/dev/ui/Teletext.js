define(["jquery","joshua/util/Class","greensock/TweenMax","touchswipe"],function(e,t){var n=t.extend({init:function(t,n){this.$element=e(t),this._initProperty(n)}});return n._options={items:".teletext-item"},n.currentStyle={display:"block","z-index":3,autoAlpha:1,x:"0%",y:"0%",scale:1,rotationZ:"0deg"},n.nextStyle={display:"block","z-index":2,autoAlpha:1,x:"0%",y:"0%",scale:1,rotationZ:"1.6deg"},n.next2Style={display:"block","z-index":1,autoAlpha:1,x:"0%",y:"0%",scale:1,rotationZ:"3.2deg"},n.normalStyle={display:"none","z-index":-1,autoAlpha:0,x:"0%",y:"0%",scale:1,rotationZ:"3.2deg"},n.originStyle={display:"block",x:"180%",y:"180%",scale:3,rotationZ:"30deg"},n.prototype._initProperty=function(t){var r=e.extend({},n._options,t);this._options=r,this._items=this.$element.find(this._options.items),this.canSwipe=!0,this._setCss(),this._initEvents()},n.prototype._setCss=function(){this.$element.css("position")!="relative"&&this.$element.css("position","relative"),this._items.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"none"}),this._length=this._items.length,this.reset()},n.prototype._initEvents=function(){var e=this;e.$element.swipe({swipeLeft:function(t,n,r,i,s){e._startSwipe("-200%")},swipeRight:function(t,n,r,i,s){e._startSwipe("200%")},threshold:0})},n.prototype._updateIndex=function(){this._nextIndex=this._currentIndex+1==this._length?0:this._currentIndex+1,this._next2Index=this._nextIndex+1==this._length?0:this._nextIndex+1},n.prototype._startSwipe=function(e){var t=this;if(!t.canSwipe)return;TweenMax.to(t._items.eq(t._currentIndex),.4,{x:e,autoAlpha:0}),TweenMax.set(t._items.eq(t._currentIndex),n.normalStyle),t._currentIndex=t._nextIndex,t._updateIndex(),TweenMax.to(t._items.eq(t._currentIndex),.5,n.currentStyle),TweenMax.to(t._items.eq(t._nextIndex),.5,n.nextStyle),TweenMax.to(t._items.eq(t._next2Index),.5,n.next2Style)},n.prototype.reset=function(){this.canSwipe=!1,this._currentIndex=0,this._updateIndex(),TweenMax.set(this._items,n.normalStyle),TweenMax.set(this._items.eq(this._currentIndex),n.currentStyle),TweenMax.set(this._items.eq(this._nextIndex),n.nextStyle),TweenMax.set(this._items.eq(this._next2Index),n.next2Style),TweenMax.set(this._items.eq(this._currentIndex),n.originStyle),TweenMax.set(this._items.eq(this._nextIndex),n.originStyle),TweenMax.set(this._items.eq(this._next2Index),n.originStyle)},n.prototype.startAnimation=function(){var t=this;setTimeout(function(){t.canSwipe=!0,t._options.callback&&t._options.callback()},1800),TweenMax.to(t._items.eq(t._next2Index),.8,e.extend({},n.next2Style,{delay:0})),TweenMax.to(t._items.eq(t._nextIndex),.8,e.extend({},n.nextStyle,{delay:.5})),TweenMax.to(t._items.eq(t._currentIndex),.8,e.extend({},n.currentStyle,{delay:1}))},n});